{"ast":null,"code":"var _jsxFileName = \"/home/ali/Reno-shoe-shop/client/src/pages/admin/User/AddEditUser/AddEditUser.js\",\n    _s = $RefreshSig$();\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Button, FormControl, FormControlLabel, FormLabel, Radio, RadioGroup, TextField, Typography } from '@material-ui/core';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport Modal from '@material-ui/core/Modal';\nimport { unwrapResult } from '@reduxjs/toolkit';\nimport React, { useEffect, useState } from 'react';\nimport { Controller, useForm } from 'react-hook-form';\nimport { useDispatch } from 'react-redux';\nimport { toast, ToastContainer } from 'react-toastify';\nimport * as yup from 'yup';\nimport { signUp } from '../../../../redux/slices/authSlice';\nimport { updateUser } from '../../../../redux/slices/userSlice';\nimport { useStyles } from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  fullName: yup.string().required(),\n  email: yup.string().required().email(),\n  password: yup.string().required().min(8, 'Password is 8 characters long')\n});\n\nconst AddEditUser = _ref => {\n  _s();\n\n  let {\n    open,\n    handleClose,\n    user\n  } = _ref;\n  const classes = useStyles();\n  const [value, setValue] = useState('false');\n\n  const handleChange = event => {\n    setValue(event.target.value);\n  };\n\n  const dispatch = useDispatch();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    control,\n    reset\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const handleAddUser = data => {\n    const user = {\n      email: data.email,\n      fullName: data.fullName,\n      isAdmin: value,\n      password: data.password\n    };\n    const action = signUp(user);\n    dispatch(action).then(unwrapResult).then(() => {\n      handleClose();\n      reset();\n      setValue('false');\n      toast('Add user successfully!', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        type: 'success'\n      });\n    }).catch(error => console.log(error));\n  };\n\n  const handleUpdateUser = data => {\n    const newUser = {\n      fullName: data.fullName,\n      email: data.email,\n      isAdmin: value,\n      _id: user._id\n    };\n    const action = updateUser(newUser);\n    dispatch(action).then(unwrapResult).then(() => {\n      handleClose();\n      reset();\n      setValue('false');\n      toast('Update user successfully!', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        type: 'success'\n      });\n    }).catch(error => console.log(error));\n  };\n\n  useEffect(() => {\n    if (user) {\n      reset({\n        fullName: user.fullName,\n        email: user.email,\n        password: '123123123'\n      });\n      setValue(user.isAdmin.toString());\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      \"aria-labelledby\": \"transition-modal-title\",\n      \"aria-describedby\": \"transition-modal-description\",\n      className: classes.modal,\n      open: open,\n      onClose: () => {\n        handleClose();\n        reset();\n      },\n      closeAfterTransition: true,\n      BackdropComponent: Backdrop,\n      BackdropProps: {\n        timeout: 300\n      },\n      children: /*#__PURE__*/_jsxDEV(Fade, {\n        in: open,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: classes.paper,\n          onSubmit: handleSubmit(user ? handleUpdateUser : handleAddUser),\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Fullname\",\n            variant: \"outlined\",\n            required: true,\n            className: classes.input,\n            ...register('fullName')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 7\n          }, this), !user && /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Password\",\n            ...register('password'),\n            type: \"password\",\n            variant: \"outlined\",\n            required: true,\n            className: classes.input\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Email\",\n            type: \"email\",\n            ...register('email'),\n            variant: \"outlined\",\n            required: true,\n            className: classes.input\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            component: \"fieldset\",\n            className: classes.formControl,\n            children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n              component: \"legend\",\n              className: classes.radioHeading,\n              children: \"Role\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Controller, {\n              rules: {\n                required: true\n              },\n              control: control // defaultValue=\"business\"\n              ,\n              render: _ref2 => {\n                let {\n                  field\n                } = _ref2;\n                return /*#__PURE__*/_jsxDEV(RadioGroup, { ...field,\n                  value: value,\n                  onChange: handleChange,\n                  className: classes.radioContainer,\n                  children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"true\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {\n                      style: {\n                        color: '#1a202c',\n                        '&$checked': {\n                          color: '#1a202c'\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 13\n                    }, this),\n                    label: \"Admin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"false\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {\n                      style: {\n                        color: '#1a202c',\n                        '&$checked': {\n                          color: '#1a202c'\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 13\n                    }, this),\n                    label: \"Customer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 10\n                }, this);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 7\n          }, this), errors.password && /*#__PURE__*/_jsxDEV(Typography, {\n            component: \"p\",\n            className: classes.error,\n            children: errors.password.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: classes.save,\n            type: \"submit\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"bottom-center\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true,\n      rtl: false,\n      pauseOnFocusLoss: true,\n      draggable: true,\n      pauseOnHover: true,\n      theme: \"dark\",\n      type: \"default\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AddEditUser, \"iest1BrdM4P0CeWY3P3WMdb+Dss=\", false, function () {\n  return [useStyles, useDispatch, useForm];\n});\n\n_c = AddEditUser;\nexport default AddEditUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEditUser\");","map":{"version":3,"sources":["/home/ali/Reno-shoe-shop/client/src/pages/admin/User/AddEditUser/AddEditUser.js"],"names":["yupResolver","Button","FormControl","FormControlLabel","FormLabel","Radio","RadioGroup","TextField","Typography","Backdrop","Fade","Modal","unwrapResult","React","useEffect","useState","Controller","useForm","useDispatch","toast","ToastContainer","yup","signUp","updateUser","useStyles","schema","object","shape","fullName","string","required","email","password","min","AddEditUser","open","handleClose","user","classes","value","setValue","handleChange","event","target","dispatch","register","handleSubmit","formState","errors","control","reset","resolver","handleAddUser","data","isAdmin","action","then","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","type","catch","error","console","log","handleUpdateUser","newUser","_id","toString","modal","timeout","paper","input","formControl","radioHeading","field","radioContainer","color","message","save"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup'\nimport {\n\tButton,\n\tFormControl,\n\tFormControlLabel,\n\tFormLabel,\n\tRadio,\n\tRadioGroup,\n\tTextField,\n\tTypography,\n} from '@material-ui/core'\nimport Backdrop from '@material-ui/core/Backdrop'\nimport Fade from '@material-ui/core/Fade'\nimport Modal from '@material-ui/core/Modal'\nimport { unwrapResult } from '@reduxjs/toolkit'\nimport React, { useEffect, useState } from 'react'\nimport { Controller, useForm } from 'react-hook-form'\nimport { useDispatch } from 'react-redux'\nimport { toast, ToastContainer } from 'react-toastify'\nimport * as yup from 'yup'\nimport { signUp } from '../../../../redux/slices/authSlice'\nimport { updateUser } from '../../../../redux/slices/userSlice'\nimport { useStyles } from './styles'\n\nconst schema = yup.object().shape({\n\tfullName: yup.string().required(),\n\temail: yup.string().required().email(),\n\tpassword: yup.string().required().min(8, 'Password is 8 characters long'),\n})\n\nconst AddEditUser = ({ open, handleClose, user }) => {\n\tconst classes = useStyles()\n\n\tconst [value, setValue] = useState('false')\n\n\tconst handleChange = (event) => {\n\t\tsetValue(event.target.value)\n\t}\n\n\tconst dispatch = useDispatch()\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t\tformState: { errors },\n\t\tcontrol,\n\t\treset,\n\t} = useForm({\n\t\tresolver: yupResolver(schema),\n\t})\n\n\tconst handleAddUser = (data) => {\n\t\tconst user = {\n\t\t\temail: data.email,\n\t\t\tfullName: data.fullName,\n\t\t\tisAdmin: value,\n\t\t\tpassword: data.password,\n\t\t}\n\n\t\tconst action = signUp(user)\n\t\tdispatch(action)\n\t\t\t.then(unwrapResult)\n\t\t\t.then(() => {\n\t\t\t\thandleClose()\n\t\t\t\treset()\n\t\t\t\tsetValue('false')\n\t\t\t\ttoast('Add user successfully!', {\n\t\t\t\t\tposition: 'bottom-center',\n\t\t\t\t\tautoClose: 3000,\n\t\t\t\t\thideProgressBar: false,\n\t\t\t\t\tcloseOnClick: true,\n\t\t\t\t\tpauseOnHover: true,\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tprogress: undefined,\n\t\t\t\t\ttype: 'success',\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch((error) => console.log(error))\n\t}\n\n\tconst handleUpdateUser = (data) => {\n\t\tconst newUser = {\n\t\t\tfullName: data.fullName,\n\t\t\temail: data.email,\n\t\t\tisAdmin: value,\n\t\t\t_id: user._id,\n\t\t}\n\n\t\tconst action = updateUser(newUser)\n\t\tdispatch(action)\n\t\t\t.then(unwrapResult)\n\t\t\t.then(() => {\n\t\t\t\thandleClose()\n\t\t\t\treset()\n\t\t\t\tsetValue('false')\n\t\t\t\ttoast('Update user successfully!', {\n\t\t\t\t\tposition: 'bottom-center',\n\t\t\t\t\tautoClose: 3000,\n\t\t\t\t\thideProgressBar: false,\n\t\t\t\t\tcloseOnClick: true,\n\t\t\t\t\tpauseOnHover: true,\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tprogress: undefined,\n\t\t\t\t\ttype: 'success',\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch((error) => console.log(error))\n\t}\n\n\tuseEffect(() => {\n\t\tif (user) {\n\t\t\treset({\n\t\t\t\tfullName: user.fullName,\n\t\t\t\temail: user.email,\n\t\t\t\tpassword: '123123123',\n\t\t\t})\n\t\t\tsetValue(user.isAdmin.toString())\n\t\t}\n\t}, [user])\n\treturn (\n\t\t<>\n\t\t\t<Modal\n\t\t\t\taria-labelledby=\"transition-modal-title\"\n\t\t\t\taria-describedby=\"transition-modal-description\"\n\t\t\t\tclassName={classes.modal}\n\t\t\t\topen={open}\n\t\t\t\tonClose={() => {\n\t\t\t\t\thandleClose()\n\t\t\t\t\treset()\n\t\t\t\t}}\n\t\t\t\tcloseAfterTransition\n\t\t\t\tBackdropComponent={Backdrop}\n\t\t\t\tBackdropProps={{\n\t\t\t\t\ttimeout: 300,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Fade in={open}>\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName={classes.paper}\n\t\t\t\t\t\tonSubmit={handleSubmit(user ? handleUpdateUser : handleAddUser)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tlabel=\"Fullname\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\t{...register('fullName')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{!user && (\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t{...register('password')}\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t{...register('email')}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormControl component=\"fieldset\" className={classes.formControl}>\n\t\t\t\t\t\t\t<FormLabel component=\"legend\" className={classes.radioHeading}>\n\t\t\t\t\t\t\t\tRole\n\t\t\t\t\t\t\t</FormLabel>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\trules={{ required: true }}\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t// defaultValue=\"business\"\n\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.radioContainer}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t\t\t<Radio\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#1a202c',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'&$checked': {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#1a202c',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Admin\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"false\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t\t\t<Radio\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#1a202c',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'&$checked': {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#1a202c',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Customer\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t{errors.password && (\n\t\t\t\t\t\t\t<Typography component=\"p\" className={classes.error}>\n\t\t\t\t\t\t\t\t{errors.password.message}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button className={classes.save} type=\"submit\">\n\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</form>\n\t\t\t\t</Fade>\n\t\t\t</Modal>\n\t\t\t<ToastContainer\n\t\t\t\tposition=\"bottom-center\"\n\t\t\t\tautoClose={3000}\n\t\t\t\thideProgressBar={false}\n\t\t\t\tnewestOnTop={false}\n\t\t\t\tcloseOnClick\n\t\t\t\trtl={false}\n\t\t\t\tpauseOnFocusLoss\n\t\t\t\tdraggable\n\t\t\t\tpauseOnHover\n\t\t\t\ttheme=\"dark\"\n\t\t\t\ttype=\"default\"\n\t\t\t/>\n\t\t</>\n\t)\n}\n\nexport default AddEditUser\n"]},"metadata":{},"sourceType":"module"}